generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model tasks {
  id               Int            @id
  taskGroupId      Int?           @map("task_group_id")
  maxPoints        Float          @map("max_points")
  taskType         String         @map("task_type") @db.VarChar(100)
  status           Status         @default(DRAFT)
  additionalData   additionalData @relation(fields: [additionalDataId], references: [id])
  additionalDataId Int            @unique
}

model additionalData {
  id       Int    @id @default(autoincrement())
  solution String @db.VarChar(1000)
  task     tasks?
}

model submissions {
  id            String     @id @default(cuid())
  userId        String     @map("user_id") @db.VarChar(255)
  assignmentId  String     @map("assignment_id") @db.VarChar(255)
  taskId        Int        @map("task_id")
  language      Language
  feedbackLevel Int        @map("feedback_level")
  submission    submission @relation(fields: [submissionId], references: [id])
  submissionId  Int        @unique
}

model submission {
  id         Int          @id @default(autoincrement())
  input      String       @db.VarChar(1000)
  submission submissions?
}

enum Language {
  EN
  DE
}

enum Status {
  DRAFT
  READY_FOR_APPROVAL
  APPROVED
}
